# Build Instructions for NJC Song Book APK

This project is set up as a Progressive Web App (PWA) wrapped with Capacitor for Android.

## Prerequisites
- Node.js and npm
- Android Studio (with Android SDK installed)
- Java Development Kit (JDK)

## Project Structure
- `www/`: Contains the web assets (HTML, JS, CSS, Manifest).
- `android/`: Contains the Android project generated by Capacitor.
- `capacitor.config.json`: Capacitor configuration.

## How to Build the APK

1. **Install Dependencies** (if not already done):
   ```bash
   npm install
   ```

2. **Sync Web Assets**:
   If you make changes to the `www` folder, sync them to the Android project:
   ```bash
   npx cap sync
   ```

3. **Build APK**:
   You have two options:

   **Option A: Using Android Studio (Recommended)**
   ```bash
   npx cap open android
   ```
   - This will open Android Studio.
   - Wait for Gradle sync to finish.
   - Go to `Build` > `Build Bundle(s) / APK(s)` > `Build APK(s)`.
   - Locate the APK in `android/app/build/outputs/apk/debug/`.

   **Option B: Command Line**
   ```bash
   cd android
   ./gradlew assembleDebug
   ```
   - The APK will be at `android/app/build/outputs/apk/debug/app-debug.apk`.

## Offline & Update Behavior
- The app uses a **Service Worker** with a **Network-First** strategy.
- **Online**: It checks for the latest version of the app (HTML/JS) and updates the cache.
- **Offline**: It serves the cached version.
- **Data**: Song data is stored in IndexedDB for offline access.

## Troubleshooting
- If the build fails due to missing SDK, ensure `ANDROID_HOME` environment variable is set to your Android SDK location.
